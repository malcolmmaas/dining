<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" type="image/x-icon" href="https://aosc.umd.edu/sites/default/files/favicon%20%281%29.ico">
    <title>UMD Dining Swipe Plotter</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <!-- <link rel="stylesheet" href="/resources/demos/style.css"> -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>

    <script type="module" src="index.js"></script>
    <!-- <script type="module">
      import { copyCode } from "/index.js";
      function testtt() {
        console.log('ACCCCCCCCCCcc')
        return copyCode()
      }
    </script> -->
  </head>

  <body style="font-family: Roboto,arial,sans-serif; line-height: 1.4;">

    <h3>
      This page lets you plot your dining hall swipes and view swipe data of others who have opted in.<br>Follow the instructions below to get started.
    </h3>
    
    <h4>To plot your own data privately:</h4>
    
    </p>
        <ol>
          <li>Go to the <a href="https://dsonline2.umd.edu/dpmsonline/home.do" target="_blank">UMD dining online services</a>.</li>
          <li>Click "View Current Plan and Transactions".</li>
          <li>By default, <b>only the past week</b> of swipes is shown in the table under "Balance Transactions". If you want to change that, <b>adjust the "From" and "To" dates, then click the search icon</b>. Wait for the page to load.</li>
          <li>On the same dining plan page, press ctrl+shift+J on Windows or command+option+J on Mac. This brings up the console; you can ignore most of the stuff on it.</li>
          <li>Click this button to copy a code snippet to your clipboard:
            <button type="submit" onclick="copyCode()">Copy code</button>.
            <span id='copyIndicator'></span></li>
          <li>Go back to the dining page. In the console, press ctrl+V on Windows or command+V on Mac. This pastes the code you copied into the console.</li>
          <li>Press <b>enter</b> to run the code, then press <b>tab</b>. Wait a couple seconds.</li>
          <li>Hopefully, your name and associated swipe data was just copied to your clipboard. Paste it here: <br><input type="text" id="copied" name="copied" style="width: 100%;"></li>
          <li>Then click here to plot the data you pasted: <button type="submit" onclick="generatePlot('from form')">Generate plot</button></li>
          <li>If you want to submit your data to a database so other users can view it, click here: <button type="submit" onclick="submitToDb()">Submit to database</button></li>
          <li>Submitting your data allows you to compare it with others'. It also means you can come back to this site later and won't have to re-copy your data.
            However, your data does not update automatically - you will need to copy any new swipes you have from the dining services website.
          </li>
        </ol>
    <p>
    
    <h4>To plot other users' data:</h4>

    Start typing someone's name below. If they have submitted their data to the database, you will be able to view it.
    <br>
    <input id="autocomplete" name="name" type="text"/><br>
    <button type="submit" onclick="getData()">Get Data</button>
    <br>
    You can also compare your data with friends', to see how often you eat together. Enter up to 5 other names below and click "Compare" (the name in the box above is included in the comparison).
    <br>
    <input id="compare1" name="name1" type="text"/><br>
    <input id="compare2" name="name2" type="text"/><br>
    <input id="compare3" name="name3" type="text"/><br>
    <input id="compare4" name="name4" type="text"/><br>
    <input id="compare5" name="name5" type="text"/><br>
    <button type="submit" onclick="compare()">Compare</button>
    
    <br>
    The tables and plots below only reflect data that each user has chosen to submit to the database. It may be incomplete.
    <table id='table1'>
      
    </table>
    <table id='table2'>

    </table>
    <div id='plot1'></div>
    <div id='plot2'></div>
    
    </body>
  
</html>
